!function(e){"use strict";function t(){var t=this;t.reads=[],t.writes=[],t.raf=a.bind(e),u("initialized",t)}function n(e){u("flush");var t,n=e.writes,r=e.reads;try{u("flushing reads",r.length),i(r),u("flushing writes",n.length),i(n)}catch(s){t=s}if(e.scheduled=!1,(r.length||n.length)&&e.scheduleFlush(),t){if(u("task errored",t.message),!e["catch"])throw t;e["catch"](t)}}function i(e){u("run tasks");for(var t;t=e.shift();)t()}function r(e,t){var n=e.indexOf(t);return!!~n&&!!e.splice(n,1)}function s(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}var u=function(){},a=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,16)};t.prototype={constructor:t,measure:function(e,t){u("measure");var n=t?e.bind(t):e;return this.reads.push(n),n},mutate:function(e,t){u("mutate");var n=t?e.bind(t):e;return this.writes.push(n),n},clear:function(e){return u("clear",e),r(this.reads,e)||r(this.writes,e)},scheduleFlush:function(){this.scheduled||(this.scheduled=!0,this.raf(n.bind(null,this)),u("flush scheduled"))},extend:function(e){if(u("extend",e),"object"!=typeof e)throw new Error("expected object");var t=Object.create(this);return s(t,e),t.fastdom=this,t.initialize&&t.initialize(),t},"catch":null};var o=e.fastdom=e.fastdom||new t;"f"==(typeof define)[0]?define(function(){return o}):"o"==(typeof module)[0]&&(module.exports=o)}("undefined"!=typeof window?window:this);